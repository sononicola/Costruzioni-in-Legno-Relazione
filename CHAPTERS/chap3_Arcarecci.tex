\chapter{Verifica degli elementi}
\section{Arcarecci}

\begin{pythontexcustomcode}{py}
import numpy as np
from StrengthClasses.glulam_strength_classes import glulam
def verifica(a,b,name):
    if a<b:
        print('La verifica a ' + name + ' è pertanto soddisfatta')
    else:
        print('La verifica a ' + name + ' non è soddisfatta')
\end{pythontexcustomcode}

\begin{pycode}[arcarecci]
glulam_class = 'GL28h'
kmod = 0.9
gammaM = 1.45
k_def = 0.6

f_mk, f_t0k, f_t90k, f_c0k, f_c90k, f_vk, f_rk, \
E0mean, E005, E90mean, E9005, Gmean, G05, Grmean, Gr05, \
rho_k, rho_mean = glulam(glulam_class)

f_md, f_t0d, f_t90d, f_c0d, f_c90d, f_vd, f_rd = (kmod * X_k / gammaM for X_k in glulam(glulam_class)[0:7])

M_d = 9.6296875 #kNm
V_d = 7.70375 #kN

M_d = M_d * 10**6 
V_d = V_d * 10**3 

b = 160
h = 200
l = 5000

###########################################################
W = b * h**2 / 6 #sezioni rettangolari
J = b*h**3 / 12

#Flessione:
sigma_md = M_d / W
f_md = kmod * f_mk / gammaM

# Sbandamento :
# Vedi pagina 291 del libro
l_t = 2500 # distanza tra due ritegni torsionali successivi (l/2)
a1 = 1.13
a2 = 1.44
az = h/2
# caso generico per il RETTANGOLO e non semplificato per h/b > 4
B = E0mean * b**3 * h / 12 # rigidezza flessionale attorno asse z
T = Gmean * b**3 * h / (3*(1 + 0.6 * b/h)) # rigidezza torsionale 
l_eff = l_t / (a1 * (1 - a2 * az/l_t * np.sqrt(B/T)))

sigma_mcrit = np.pi/l_eff * b**2 / h * E005 * np.sqrt(Gmean/E0mean)
lambda_relm = np.sqrt(f_mk/sigma_mcrit)
if lambda_relm < 0.75:
    k_crit = 1
elif lambda_relm < 1.14:
    k_crit = 1.56 - .75*lambda_relm
else:
    k_crit = 1/(lambda_relm**2)


#Taglio    
#kcrit legno lamellare = 2.5/f_vk -> b_eff = kcr * b
b_eff = 2.5/f_vk * b
tau_d = V_d * 1.5 / (b_eff * h)
f_vd = kmod * f_vk / gammaM

#Freccia
chi = 1.2
def w_inst(q): 
    w_inst_M = 5/384 * q * l**4 / (E0mean * J)
    w_inst_V = chi * 1/8 * q * l**2 / (Gmean * b * h)
    w_inst = w_inst_M + w_inst_V
    
    return w_inst

\end{pycode}

\begin{pysub}[arcarecci]
Dati di progetto per il legno lamellare $GL28h$, $\gamma_M = !{gammaM}$:
\begin{table}[H]
    \centering
    \caption{Azioni di progetto nei punti di sezione indicati in figura per la trave a doppia rastremazione}
    \begin{tabular}{c  S[table-format=4.1] S[table-format=4.3] S[table-format=3.3]}
        \toprule
		%\multicolumn{4}{c}{Azioni di progetto nei punti di sezione}\\
        Sezione & \multicolumn{1}{c}{$x$ [\si{\milli\metre}]} & \multicolumn{1}{c}{$M_d$ [\si{\kilo\newton\metre}]}& \multicolumn{1}{c}{$V_d$ [\si{\kilo\newton}]} \\
        \midrule
        A & 0. 0               & 0.0                      & !{round(V_d/10**3,3)}   \\
        B & !{round(l/2,1)}    & !{round(M_d/10**6,3)}    & 0.0						\\
        \bottomrule
    \end{tabular}
\end{table} 
\begin{table}[H]
    \centering
    \caption{Valori di progetto per la verifica della trave a doppia rastremazione}
    \begin{tabular}{lS[table-format=2.1] @{\hspace{2cm}} lS[table-format=2.3]@{\hspace{2cm}} lS[table-format=5.1]}
        \toprule
		\multicolumn{6}{c}{Valori geometrici e coefficienti di esposizione o durata del carico}\\
        \midrule
		$b$      & \SI{!{b}}{\milli\metre}     & $h$        & \SI{!{h}}{\milli\metre}   & $l$           & \SI{!{l}}{\milli\metre}  \\ 
        $\gamma_M$      & \SI{!{gammaM}}{}     & $k_{mod}$        & \SI{!{kmod}}{}   & $k_{def}$ & \SI{!{k_def}}{} \\
        \midrule
        \multicolumn{6}{c}{Valori di resistenza GL28h [\si{\mega\pascal}] } \\
        \midrule
        $f_{m,k}$    & !{f_mk}   & $f_{m,d}$    & !{round(f_md,3)}  & $E_{0,mean}$ & !{E0mean} \\
        $f_{v,k}$    & !{f_vk}   & $f_{v,d}$    & !{round(f_vd,3)}  & $E_{0,05}$   & !{E005} \\
        $f_{c,90,k}$ & !{f_c90k} & $f_{c,90,d}$ & !{round(f_c90d,3)} & $G_{mean}$   & !{Gmean} \\
        $f_{t,90,k}$ & !{f_t90k} & $f_{t,90,d}$ & !{round(f_t90d,3)} &  $G_{05}$     & !{G05}\\
        \bottomrule
    \end{tabular}
\end{table} 
Sezione di verifica: $\SI{!{b}}{} \times \SI{!{h}}{\milli\metre}$

Classe di servizio 2: $k_{mod} = !{kmod}$


disegno, momento, taglio, sezione, ecc
\subsection{Flessione}
\begin{equation} 
    \sigma_{m,d} \leq f_{m,d} = \SI{!{round(f_md,3)}}{\mega\pascal}
\end{equation}

La sollecitazione massima la si ha in mezzeria, pertanto è pari, avendo sezione rettangolare, a:
\[
\sigma_{m,d} 
= \frac{M_d}{W} 
= \frac{M_d}{\dfrac {b \cdot h^2}{6}} 
= \frac{\SI{!{round(M_d/10**6,3)}e6}{\newton\milli\metre}} {\dfrac {!{b} \cdot !{h}^2}{6} \si{\milli\metre\tothe{3}}} 
= \SI{!{round(sigma_md,3)}}{\mega\pascal} 
\]


Sebbene lo sbandamento sia impedito, pur tenendone conto si ha:
\begin{equation}
     \sigma_{m,d} \leq k_{crit} \cdot f_{m,d} 
\end{equation}
dove 
\begin{equation}
    k_{crit} =
    \begin{cases}
        1 & \text{se \quad $ \lambda_{rel,m} \leq 0.75$} \\
        1.56 - 0.75 \cdot \lambda_{rel,m} & \text{se \quad $0.75 \leq \lambda_{rel,m} \leq 1.4$} \\
        \dfrac{1}{\lambda_{rel,m}^2} & \text{se \quad $\lambda_{rel,m} \geq 0.75$}
    \end{cases}
    \quad =  !{k_crit}
\end{equation}
in cui 
\[
\begin{split}
    \lambda_{rel,m} 
    &= \sqrt{  \frac{f_{m,k}}     {\sigma_{m,crit}}          } 
    = \sqrt{  \frac{!{f_mk}}     {!{round(sigma_mcrit,1)}}  } 
    = !{round(lambda_relm,3)} \\
    \sigma_{m,crit} 
    &= \dfrac{\pi}{l_{eff}} \dfrac{b^2}{h} E_{0.05} \sqrt{\dfrac{G_{mean}}{E_{mean}}} 
    = \dfrac{\pi}{!{round(l_eff,1)}} \dfrac{!{b}^2}{!{h}} !{E005} \sqrt{\dfrac{!{Gmean}}{!{E0mean}}} 
    = \SI{!{round(sigma_mcrit,1)}}{\mega\pascal} \\
    l_{eff}  
    &= \frac{l_t}{a_1 \left(1 - a_2  \dfrac{a_z}{l_t} \sqrt{\dfrac{B}{T}}\right)} 
    = \frac{!{l_t}}{!{a1} \left(1 - !{a2}  \dfrac{!{az}}{!{l_t}} \sqrt{\dfrac{!{round(B,1)}}{!{round(T,1)}}}\right)}
    =   
    \SI{!{round(l_eff,1)}}{\milli\metre}
\end{split}
\]
avendo preso $l_t = \dfrac{l}{2}, a_z = \dfrac{h}{2}$, i coefficienti di ribaltamento $a_1, a_2$ in base alla condizione di vincolo (tabella E.2 DIN 1052:2004) ed essendo $B$ e $T$ rispettivamente la rigidezza flessionale attorno all'asse $z$ e torsionale di un rettangolo.

Quindi la resistenza di progetto vale
\[
    k_{crit} \cdot f_{m,d} 
    = k_{crit} \cdot f_{m,d}
    = !{k_crit} \cdot \SI{!{round(f_md,3)}}{\mega\pascal}
    = \SI{!{round(k_crit * f_md,3)}}{\mega\pascal}
\]
%\pyc{verifica(sigma_md,k_crit * f_md,'flessione')}

\subsection{Taglio}
Si deve avere
\begin{equation}
    \tau_d \leq f_{v,d}   
\end{equation}
La sollecitazione massima che si ha agli appoggi vale
\[
\tau_d 
= 1.5 \frac{V_d}{b_{eff} \cdot h} 
= \frac{\SI{!{round(V_d/10**3,3)}e3}{\newton}} {!{round(b_eff,1)} \cdot !{h} \si{\milli\metre\tothe{2}}} 
= \SI{!{round(tau_d,3)}}{\mega\pascal} 
\]
in cui da normativa (C.4.4.8.1.9) per il legno lamellare 
\[
    b_{eff} 
    = k_{cr} \cdot b 
    = \dfrac{2.5}{f_{v,k}} \cdot b 
    = \dfrac{2.5}{!{f_vk}} \cdot !{b}
    = \SI{!{round(b_eff,1)}}{\milli\metre}
\]
Essendo $\SI{!{round(tau_d,3)}}{\mega\pascal} < \SI{!{round(f_vd,3)}}{\mega\pascal}$ la verifica è soddisfatta.

\subsection{Freccia}
La freccia dovuta al contributo del momento flettente e del taglio, nel caso di semplice appoggio vale
\begin{equation}
    w(q) = \dfrac{5}{384} \frac{q \cdot l^4}{E_{0,mean} \cdot J} + \chi \dfrac{1}{8} \frac{q \cdot l^2}{G_{mean} \cdot b \cdot h}
\end{equation}
che, per un carico unitario e per una sezione rettangolare, assume il valore di riferimento
\begin{equation}
    w(q = \SI{1}{\kilo\newton\per\metre}) 
    = \dfrac{5}{384} \frac{1 \cdot !{l}^4}{!{E0mean} \cdot \SI{!{round(J/10**6,3)}e6}{}} + !{chi} \dfrac{1}{8} \frac{1 \cdot !{l}^2}{!{Gmean} \cdot !{b} \cdot !{h}} 
    = \SI{!{round(w_inst(1),3)}}{\milli\metre}
\end{equation}

\end{pysub}
